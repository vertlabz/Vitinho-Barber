generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String   @id @default(uuid())
  name       String
  email      String   @unique
  password   String
  role       String
  createdAt  DateTime @default(now())
}

model Client {
  id        String   @id @default(uuid())
  name      String
  phone     String?
  email     String?  @unique
  createdAt DateTime @default(now())
  appointments Appointment[]
}

model Service {
  id             String   @id @default(uuid())
  name           String
  durationMinutes Int
  priceCents     Int
  createdAt      DateTime @default(now())
  appointments   Appointment[]
}

model Staff {
  id           String   @id @default(uuid())
  name         String
  active       Boolean  @default(true)
  appointments Appointment[]
  workingHours StaffWorkingHours[]
}

model Appointment {
  id         String   @id @default(uuid())
  client     Client   @relation(fields: [clientId], references: [id])
  clientId   String
  staff      Staff?   @relation(fields: [staffId], references: [id])
  staffId    String?
  service    Service  @relation(fields: [serviceId], references: [id])
  serviceId  String
  startAt    DateTime
  endAt      DateTime
  status     String   @default("pending")
  notes      String?
  createdAt  DateTime @default(now())
}

model StaffWorkingHours {
  id        String  @id @default(uuid())
  staff     Staff   @relation(fields: [staffId], references: [id])
  staffId   String
  weekday   Int     // 0 = Sunday ... 6 = Saturday
  startTime String  // format 'HH:MM' (local time of barbearia)
  endTime   String  // format 'HH:MM'
}